{"ast":null,"code":"var _jsxFileName = \"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport useLocalStorage from \"./hooks/useLocalStorage\";\nimport Routes from \"./routes/Routes\";\nimport Navigation from \"./routes/Navigation\";\nimport SteamDbApi from \"./api/api\";\nimport UserContext from \"./auth/UserContext\";\nimport jwt from \"jsonwebtoken\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TOKEN_STORAGE_ID = \"steamdb-token\";\nfunction App() {\n  _s();\n  const [infoLoaded, setInfoLoaded] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [token, setToken] = useLocalStorage(TOKEN_STORAGE_ID);\n  console.debug(\"App\", \"currentUser=\", currentUser, \"token=\", token);\n  useEffect(function loadUserInfo() {\n    console.debug(\"App useEffect loadUserInfo\", \"token=\", token);\n    async function getCurrentUser() {\n      if (token) {\n        try {\n          let {\n            username\n          } = jwt.decode(token);\n          SteamDbApi.token = token;\n          let currentUser = await SteamDbApi.getCurrentUser(username);\n          setCurrentUser(currentUser);\n        } catch (e) {\n          console.error(\"App loadUserInfo: problem loading\", e);\n          setCurrentUser(null);\n        }\n      }\n      setInfoLoaded(true);\n    }\n    setInfoLoaded(false);\n    getCurrentUser();\n  }, [token]);\n  async function signup(signupData) {\n    try {\n      let token = await SteamDbApi.signup(signupData);\n      setToken(token);\n      return {\n        success: true\n      };\n    } catch (e) {\n      console.error(\"signup failed\", e);\n      return {\n        success: false,\n        e\n      };\n    }\n  }\n  async function login(loginData) {\n    try {\n      let token = await SteamDbApi.login(loginData);\n      setToken(token);\n      return {\n        success: true\n      };\n    } catch (e) {\n      console.error(\"login failed\", e);\n      return {\n        success: false,\n        e\n      };\n    }\n  }\n  function logout() {\n    setCurrentUser(null);\n    setToken(null);\n    localStorage.removeItem(\"searchedAppData\");\n    localStorage.removeItem(\"searchTerm\");\n  }\n  if (!infoLoaded) return;\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n      value: {\n        currentUser,\n        setCurrentUser\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: [/*#__PURE__*/_jsxDEV(Navigation, {\n          logout: logout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          login: login,\n          signup: signup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"r2zUiwL7+rY/nY4IxCQHgAfLP6I=\", false, function () {\n  return [useLocalStorage];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","useLocalStorage","Routes","Navigation","SteamDbApi","UserContext","jwt","jsxDEV","_jsxDEV","TOKEN_STORAGE_ID","App","_s","infoLoaded","setInfoLoaded","currentUser","setCurrentUser","token","setToken","console","debug","loadUserInfo","getCurrentUser","username","decode","e","error","signup","signupData","success","login","loginData","logout","localStorage","removeItem","children","Provider","value","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport useLocalStorage from \"./hooks/useLocalStorage\";\nimport Routes from \"./routes/Routes\"\nimport Navigation from \"./routes/Navigation\";\nimport SteamDbApi from \"./api/api\";\nimport UserContext from \"./auth/UserContext\";\nimport jwt from \"jsonwebtoken\"\nimport \"./App.css\"\n\nexport const TOKEN_STORAGE_ID = \"steamdb-token\";\n\nfunction App() {\n  const [infoLoaded, setInfoLoaded] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null)\n  const [token, setToken] = useLocalStorage(TOKEN_STORAGE_ID);\n\n  console.debug(\n    \"App\",\n    \"currentUser=\", currentUser,\n    \"token=\", token,\n  );\n\n  useEffect(function loadUserInfo() {\n    console.debug(\"App useEffect loadUserInfo\", \"token=\", token);\n\n    async function getCurrentUser(){\n      if(token){\n        try{\n          let{ username } = jwt.decode(token)\n          SteamDbApi.token = token;\n          let currentUser = await SteamDbApi.getCurrentUser(username)\n          setCurrentUser(currentUser);\n        } catch (e) {\n          console.error(\"App loadUserInfo: problem loading\", e);\n          setCurrentUser(null);\n        }\n      }\n      setInfoLoaded(true);\n    }\n    setInfoLoaded(false);\n    getCurrentUser();\n  }, [token]);\n\n  async function signup(signupData){\n    try{\n      let token = await SteamDbApi.signup(signupData);\n      setToken(token)\n      return {success: true };\n    } catch(e){\n      console.error(\"signup failed\", e);\n      return {success: false, e};\n    }\n  }\n\n  async function login(loginData){\n    try{\n      let token = await SteamDbApi.login(loginData);\n      setToken(token)\n      return {success:true};\n    }catch(e){\n      console.error(\"login failed\", e);\n      return {success: false, e};\n    }\n  }\n\n  function logout() {\n    setCurrentUser(null);\n    setToken(null);\n    localStorage.removeItem(\"searchedAppData\");\n    localStorage.removeItem(\"searchTerm\")\n\n  }\n\n  \n  if(!infoLoaded) return;\n\n  return (\n    <BrowserRouter>\n        <UserContext.Provider\n            value={{ currentUser, setCurrentUser}}>\n          <div className=\"App\">\n            <Navigation logout={logout} />\n            <Routes login={login} signup={signup}/>\n          </div>\n          </UserContext.Provider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}