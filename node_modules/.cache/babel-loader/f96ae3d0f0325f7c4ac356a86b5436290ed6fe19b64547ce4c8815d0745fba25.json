{"ast":null,"code":"var _jsxFileName = \"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/src/steamapps/AppNews.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport SteamDbApi from \"../api/api\";\nimport AppNewsCard from \"./AppNewsCard\";\nimport UserContext from \"../auth/UserContext\";\nimport \"./AppNews.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AppNews() {\n  _s();\n  const {\n    currentUser,\n    setCurrentUser\n  } = useContext(UserContext);\n  const {\n    appid\n  } = useParams();\n  let userid = currentUser.id;\n  console.debug(\"AppNews\");\n  const [news, setNews] = useState(null);\n  const [buttonState, setButtonState] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [backgroundImageUrl, setBackgroundImageUrl] = useState(\"\");\n  const [imgUrl, setImgUrl] = useState(\"\");\n  useEffect(function getAppNewsItems() {\n    async function getNews() {\n      let res = await SteamDbApi.getAppNews(appid);\n      setNews(res.news);\n    }\n    getNews();\n  }, [appid]);\n  useEffect(() => {\n    async function checkDb() {\n      let data = {\n        appid: parseInt(appid),\n        userid\n      };\n      let res = await SteamDbApi.getFavoritedApps();\n      let found = res.find(favorite => {\n        return favorite.appid === data.appid && favorite.userid === data.userid;\n      });\n      if (found) return setButtonState(true);\n    }\n    checkDb();\n  }, []);\n  useEffect(() => {\n    async function getAppDetails() {\n      let data = await SteamDbApi.getAppDetails(appid);\n      setName(data.name);\n      setUrl(`/news/${appid}`);\n      setImgUrl(data.header_image);\n      setBackgroundImageUrl(data.backgroundImageUrl);\n    }\n    getAppDetails();\n  }, []);\n\n  // onclick (to add), also post data to favorites table\n  // onclick (to remove), also remove data from favorites table\n\n  async function btnClick() {\n    let btndata = {\n      appid,\n      userid,\n      name,\n      url,\n      backgroundImageUrl\n    };\n    try {\n      if (buttonState === false) {\n        let res = await SteamDbApi.addAppToDash(appid, btndata);\n        setButtonState(true);\n      }\n      if (buttonState === true) {\n        let res = await SteamDbApi.removeAppFromDash(appid, btndata);\n        setButtonState(false);\n      }\n    } catch (e) {\n      throw new Error(e);\n    }\n  }\n  if (!news) return;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"appnews\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"appnews-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"appnews-img\",\n        src: imgUrl\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-container\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"dash-button\",\n          onClick: btnClick,\n          children: !buttonState ? \"Add to Dash\" : \"Remove from Dash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"appnews-container\",\n      children: news.length ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"appnews-list\",\n        children: news.map(n => /*#__PURE__*/_jsxDEV(AppNewsCard, {\n          title: n.title,\n          url: n.url,\n          author: n.author\n        }, n.gid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No recent news\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n_s(AppNews, \"7mQwJVJWlgKrpv5I4elfLKYGDro=\", false, function () {\n  return [useParams];\n});\n_c = AppNews;\nexport default AppNews;\nvar _c;\n$RefreshReg$(_c, \"AppNews\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","SteamDbApi","AppNewsCard","UserContext","jsxDEV","_jsxDEV","AppNews","_s","currentUser","setCurrentUser","appid","userid","id","console","debug","news","setNews","buttonState","setButtonState","name","setName","url","setUrl","backgroundImageUrl","setBackgroundImageUrl","imgUrl","setImgUrl","getAppNewsItems","getNews","res","getAppNews","checkDb","data","parseInt","getFavoritedApps","found","find","favorite","getAppDetails","header_image","btnClick","btndata","addAppToDash","removeAppFromDash","e","Error","className","children","src","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","map","n","title","author","gid","_c","$RefreshReg$"],"sources":["/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/src/steamapps/AppNews.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport SteamDbApi from \"../api/api\";\nimport AppNewsCard from \"./AppNewsCard\";\nimport UserContext from \"../auth/UserContext\";\nimport \"./AppNews.css\"\n\n\nfunction AppNews(){\n  const { currentUser, setCurrentUser } = useContext(UserContext);\n  const {appid} = useParams();\n  let userid = currentUser.id;\n  console.debug(\"AppNews\")\n\n  const [news, setNews] = useState(null)\n  const [buttonState, setButtonState] = useState(false)\n\n  const [name, setName] = useState(\"\")\n  const [url, setUrl] = useState(\"\")\n  const [backgroundImageUrl, setBackgroundImageUrl] = useState(\"\")\n  const [imgUrl, setImgUrl] = useState(\"\")\n\n  useEffect(function getAppNewsItems(){\n    async function getNews(){\n      let res = await SteamDbApi.getAppNews(appid)\n      setNews(res.news);\n    }\n    getNews();\n  }, [appid])\n\n  useEffect(() => {\n    async function checkDb(){\n      let data = {appid: parseInt(appid), userid}\n      let res = await SteamDbApi.getFavoritedApps()\n      let found = res.find((favorite) => {\n        return favorite.appid === data.appid && favorite.userid === data.userid;\n      })\n      if(found) return setButtonState(true)\n    }\n    checkDb();\n  }, [])\n\n  useEffect(() => {\n    async function getAppDetails(){\n      let data = await SteamDbApi.getAppDetails(appid)\n      setName(data.name)\n      setUrl(`/news/${appid}`)\n      setImgUrl(data.header_image)\n      setBackgroundImageUrl(data.backgroundImageUrl)\n    }\n    getAppDetails();\n  }, [])\n\n  // onclick (to add), also post data to favorites table\n  // onclick (to remove), also remove data from favorites table\n\n  async function btnClick(){\n    let btndata = {appid, userid, name, url, backgroundImageUrl}\n    try{\n      if(buttonState === false){\n        let res = await SteamDbApi.addAppToDash(appid, btndata)\n        setButtonState(true)\n      }\n      if(buttonState === true){\n        let res = await SteamDbApi.removeAppFromDash(appid, btndata)\n        setButtonState(false)\n      }\n    }catch (e){\n      throw new Error(e)\n    }\n  }\n\n  if(!news) return;\n\n  return(\n    <div className=\"appnews\">\n      <div className=\"appnews-header\">\n      <img className=\"appnews-img\" src={imgUrl}></img>\n        <div className=\"btn-container\">\n          <button \n            className=\"dash-button\"\n            onClick={btnClick}>\n          {!buttonState ? \"Add to Dash\" : \"Remove from Dash\" }\n          </button>\n        </div>\n      </div>\n      <div className=\"appnews-container\">\n        {news.length \n          ? (\n            <ul className=\"appnews-list\">\n              {news.map(n => (\n                <AppNewsCard\n                    key={n.gid}\n                    title={n.title}\n                    url={n.url}\n                    author={n.author}\n                />\n                ))}\n            </ul>\n          ) : \n            <p>No recent news</p>}\n          </div>\n        <div>\n      </div>\n    </div>\n  )\n}\n\nexport default AppNews;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}