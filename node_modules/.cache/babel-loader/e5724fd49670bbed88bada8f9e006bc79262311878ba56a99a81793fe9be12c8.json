{"ast":null,"code":"import _regeneratorRuntime from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import SteamDbApi from\"../api/api\";import SearchAppsForm from\"../forms/SearchAppsForm\";import AppListCard from\"./AppListCard\";import useLocalStorageForSearch from\"../hooks/useLocalStorage\";import\"./AppList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AppsList(){console.debug(\"AppList\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),appData=_useState2[0],setAppData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),searched=_useState4[0],setSearched=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useLocalStorageForSe=useLocalStorageForSearch(\"searchedAppData\",[]),_useLocalStorageForSe2=_slicedToArray(_useLocalStorageForSe,2),localData=_useLocalStorageForSe2[0],setLocalData=_useLocalStorageForSe2[1];useEffect(function(){if(localData.length>0){setAppData(JSON.parse(localData));setSearched(true);}},[localData]);function search(_x){return _search.apply(this,arguments);}function _search(){_search=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(name){var appNames,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return SteamDbApi.getAppNames(name);case 3:appNames=_context.sent;data=Object.values(appNames.data).map(function(item){return{appid:item.appid,name:item.name};});setAppData(data);setLocalData(JSON.stringify(data));setLoading(true);// for(let idx in appNames.data){\n//   data.push(appNames.data[idx])\n// }\nsetSearched(true);setLoading(false);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);throw new Error(_context.t0);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return _search.apply(this,arguments);}if(!searched){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SearchAppsForm,{searchFor:search})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"applist\",children:[/*#__PURE__*/_jsx(SearchAppsForm,{searchFor:search}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"Searching...\"}):searched?/*#__PURE__*/_jsx(\"div\",{className:\"applist-container\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"applist-list\",children:appData.length>0?appData.map(function(a){return/*#__PURE__*/_jsx(AppListCard,{appid:a.appid,name:a.name},a.appid);}):/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"Sorry, no results were found!\"})})}):null]});}export default AppsList;","map":{"version":3,"names":["React","useEffect","useState","SteamDbApi","SearchAppsForm","AppListCard","useLocalStorageForSearch","jsx","_jsx","jsxs","_jsxs","AppsList","console","debug","_useState","_useState2","_slicedToArray","appData","setAppData","_useState3","_useState4","searched","setSearched","_useState5","_useState6","loading","setLoading","_useLocalStorageForSe","_useLocalStorageForSe2","localData","setLocalData","length","JSON","parse","search","_x","_search","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","name","appNames","data","wrap","_callee$","_context","prev","next","getAppNames","sent","Object","values","map","item","appid","stringify","t0","Error","stop","children","searchFor","className","a"],"sources":["/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/src/steamapps/AppList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport SteamDbApi from \"../api/api\";\nimport SearchAppsForm from \"../forms/SearchAppsForm\";\nimport AppListCard from \"./AppListCard\";\nimport useLocalStorageForSearch from \"../hooks/useLocalStorage\";\nimport \"./AppList.css\"\n\nfunction AppsList() {\n  console.debug(\"AppList\");\n\n  const [appData, setAppData] = useState([])\n  const [searched, setSearched] = useState(false);\n  const [loading, setLoading] = useState(null);\n  const [localData, setLocalData] = useLocalStorageForSearch(\"searchedAppData\", [])\n\n  useEffect(() => {\n    if(localData.length > 0) {\n      setAppData(JSON.parse(localData));\n      setSearched(true);\n    }\n  }, [localData]);\n\n  async function search(name){\n    // const data = []\n    try {\n      let appNames = await SteamDbApi.getAppNames(name);\n      const data = Object.values(appNames.data).map((item) => ({\n        appid: item.appid,\n        name: item.name\n      }))\n      setAppData(data);\n      setLocalData(JSON.stringify(data))\n      setLoading(true)\n      // for(let idx in appNames.data){\n      //   data.push(appNames.data[idx])\n      // }\n      setSearched(true)\n      setLoading(false)\n    }catch(e){\n      throw new Error(e)\n    }\n  }\n\n  if (!searched) {\n    return (\n      <div>\n        <SearchAppsForm searchFor={search} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"applist\">\n      <SearchAppsForm searchFor={search} />\n      {loading ? (\n        <p className=\"lead\">Searching...</p>\n      ) : (\n        searched ? (\n          <div className=\"applist-container\">\n            <ul className=\"applist-list\">\n              {appData.length > 0 ? (\n                appData.map((a) => (\n                  <AppListCard\n                    key={a.appid}\n                    appid={a.appid}\n                    name={a.name}\n                  />\n                ))\n              ) : (\n                <p className=\"lead\">Sorry, no results were found!</p>\n              )}\n            </ul>\n          </div>\n        ) : null\n      )}\n    </div>\n  );\n}\n\nexport default AppsList;\n"],"mappings":"0eAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,UAAU,KAAM,YAAY,CACnC,MAAO,CAAAC,cAAc,KAAM,yBAAyB,CACpD,MAAO,CAAAC,WAAW,KAAM,eAAe,CACvC,MAAO,CAAAC,wBAAwB,KAAM,0BAA0B,CAC/D,MAAO,eAAe,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtB,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClBC,OAAO,CAACC,KAAK,CAAC,SAAS,CAAC,CAExB,IAAAC,SAAA,CAA8BZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAAgCjB,QAAQ,CAAC,KAAK,CAAC,CAAAkB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAxCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA8BrB,QAAQ,CAAC,IAAI,CAAC,CAAAsB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAArCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,qBAAA,CAAkCrB,wBAAwB,CAAC,iBAAiB,CAAE,EAAE,CAAC,CAAAsB,sBAAA,CAAAZ,cAAA,CAAAW,qBAAA,IAA1EE,SAAS,CAAAD,sBAAA,IAAEE,YAAY,CAAAF,sBAAA,IAE9B3B,SAAS,CAAC,UAAM,CACd,GAAG4B,SAAS,CAACE,MAAM,CAAG,CAAC,CAAE,CACvBb,UAAU,CAACc,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,CAAC,CACjCP,WAAW,CAAC,IAAI,CAAC,CACnB,CACF,CAAC,CAAE,CAACO,SAAS,CAAC,CAAC,CAAC,QAED,CAAAK,MAAMA,CAAAC,EAAA,SAAAC,OAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,QAAA,EAAAA,OAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAArB,SAAAC,QAAsBC,IAAI,MAAAC,QAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGD,CAAA/C,UAAU,CAACgD,WAAW,CAACR,IAAI,CAAC,QAA7CC,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CACNP,IAAI,CAAGQ,MAAM,CAACC,MAAM,CAACV,QAAQ,CAACC,IAAI,CAAC,CAACU,GAAG,CAAC,SAACC,IAAI,QAAM,CACvDC,KAAK,CAAED,IAAI,CAACC,KAAK,CACjBd,IAAI,CAAEa,IAAI,CAACb,IACb,CAAC,EAAC,CAAC,CACHzB,UAAU,CAAC2B,IAAI,CAAC,CAChBf,YAAY,CAACE,IAAI,CAAC0B,SAAS,CAACb,IAAI,CAAC,CAAC,CAClCnB,UAAU,CAAC,IAAI,CAAC,CAChB;AACA;AACA;AACAJ,WAAW,CAAC,IAAI,CAAC,CACjBI,UAAU,CAAC,KAAK,CAAC,CAAAsB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAW,EAAA,CAAAX,QAAA,kBAEX,IAAI,CAAAY,KAAK,CAAAZ,QAAA,CAAAW,EAAE,CAAC,0BAAAX,QAAA,CAAAa,IAAA,MAAAnB,OAAA,iBAErB,UAAAN,OAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,GAAI,CAACjB,QAAQ,CAAE,CACb,mBACEb,IAAA,QAAAsD,QAAA,cACEtD,IAAA,CAACJ,cAAc,EAAC2D,SAAS,CAAE7B,MAAO,CAAE,CAAC,CAClC,CAAC,CAEV,CAEA,mBACExB,KAAA,QAAKsD,SAAS,CAAC,SAAS,CAAAF,QAAA,eACtBtD,IAAA,CAACJ,cAAc,EAAC2D,SAAS,CAAE7B,MAAO,CAAE,CAAC,CACpCT,OAAO,cACNjB,IAAA,MAAGwD,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,cAAY,CAAG,CAAC,CAEpCzC,QAAQ,cACNb,IAAA,QAAKwD,SAAS,CAAC,mBAAmB,CAAAF,QAAA,cAChCtD,IAAA,OAAIwD,SAAS,CAAC,cAAc,CAAAF,QAAA,CACzB7C,OAAO,CAACc,MAAM,CAAG,CAAC,CACjBd,OAAO,CAACsC,GAAG,CAAC,SAACU,CAAC,qBACZzD,IAAA,CAACH,WAAW,EAEVoD,KAAK,CAAEQ,CAAC,CAACR,KAAM,CACfd,IAAI,CAAEsB,CAAC,CAACtB,IAAK,EAFRsB,CAAC,CAACR,KAGR,CAAC,EACH,CAAC,cAEFjD,IAAA,MAAGwD,SAAS,CAAC,MAAM,CAAAF,QAAA,CAAC,+BAA6B,CAAG,CACrD,CACC,CAAC,CACF,CAAC,CACJ,IACL,EACE,CAAC,CAEV,CAEA,cAAe,CAAAnD,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}