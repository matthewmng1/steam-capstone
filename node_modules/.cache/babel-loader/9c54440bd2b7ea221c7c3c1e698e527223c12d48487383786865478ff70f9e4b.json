{"ast":null,"code":"import _regeneratorRuntime from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import SteamDbApi from\"../api/api\";import UserContext from\"../auth/UserContext\";import\"./Form.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileForm(){var navigate=useNavigate();var _useContext=useContext(UserContext),currentUser=_useContext.currentUser,setCurrentUser=_useContext.setCurrentUser;var _useState=useState({firstName:currentUser.firstName,lastName:currentUser.lastName,email:currentUser.email,username:currentUser.username,password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),flashMessage=_useState6[0],setFlashMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),saveConfirmed=_useState8[0],setSaveConfirmed=_useState8[1];console.debug(\"ProfileForm\",\"currentUser=\",currentUser,\"formData=\",formData,\"formErrors=\",formErrors,\"saveConfirmed=\",saveConfirmed);function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var profileData,username,updatedUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();profileData={firstName:formData.firstName,lastName:formData.lastName,email:formData.email,password:formData.password};username=formData.username;_context.prev=3;_context.next=6;return SteamDbApi.update(username,profileData);case 6:updatedUser=_context.sent;setFlashMessage(\"Profile successfully updated\");navigate(\"/profile\");console.log(\"updated user\",updatedUser);_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](3);console.log(\"catching error\");setFormErrors(_context.t0);return _context.abrupt(\"return\");case 17:setFormData(function(data){return _objectSpread(_objectSpread({},data),{},{password:\"\"});});setFormErrors([]);setSaveConfirmed(true);setCurrentUser(updatedUser);case 21:case\"end\":return _context.stop();}},_callee,null,[[3,12]]);}));return _handleSubmit.apply(this,arguments);}function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});setFormErrors([]);}return/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Profile\"}),flashMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"flash-message\",style:{color:\"red\"},children:flashMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"form-card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",value:currentUser.username,readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",className:\"form-control\",value:formData.firstName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",className:\"form-control\",value:formData.lastName,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",className:\"form-control\",value:formData.email,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm password to save changes: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",value:formData.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group button-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-block mt-4\",onClick:handleSubmit,children:\"Save Changes\"})})]})})]})});}export default ProfileForm;","map":{"version":3,"names":["React","useState","useContext","useNavigate","SteamDbApi","UserContext","jsx","_jsx","jsxs","_jsxs","ProfileForm","navigate","_useContext","currentUser","setCurrentUser","_useState","firstName","lastName","email","username","password","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","formErrors","setFormErrors","_useState5","_useState6","flashMessage","setFlashMessage","_useState7","_useState8","saveConfirmed","setSaveConfirmed","console","debug","handleSubmit","_x","_handleSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","profileData","updatedUser","wrap","_callee$","_context","prev","next","preventDefault","update","sent","log","t0","abrupt","data","_objectSpread","stop","handleChange","_e$target","target","name","value","_defineProperty","className","children","style","color","readOnly","onChange","type","onClick"],"sources":["/Users/matthewng/Desktop/springboard/Capstones/Capstone-2/steam-capstone/src/forms/ProfileForm.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport {useNavigate} from \"react-router-dom\"\nimport SteamDbApi from \"../api/api\";\nimport UserContext from \"../auth/UserContext\";\nimport \"./Form.css\"\n\nfunction ProfileForm() {\n  const navigate = useNavigate();\n  const { currentUser, setCurrentUser } = useContext(UserContext);\n  const [formData, setFormData] = useState({\n    firstName: currentUser.firstName,\n    lastName: currentUser.lastName,\n    email: currentUser.email,\n    username: currentUser.username,\n    password: \"\",\n  });\n  const [formErrors, setFormErrors] = useState([]);\n  const [flashMessage, setFlashMessage] = useState(\"\")\n\n  const [saveConfirmed, setSaveConfirmed] = useState(false);\n\n  console.debug(\n    \"ProfileForm\",\n    \"currentUser=\", currentUser,\n    \"formData=\", formData,\n    \"formErrors=\", formErrors,\n    \"saveConfirmed=\", saveConfirmed,\n);\n\n    async function handleSubmit(e){\n      e.preventDefault();\n\n      let profileData = {\n        firstName: formData.firstName,\n        lastName: formData.lastName,\n        email: formData.email,\n        password: formData.password\n      };\n\n      let username = formData.username;\n      let updatedUser;\n      try{\n        updatedUser = await SteamDbApi.update(username, profileData)\n        setFlashMessage(\"Profile successfully updated\")\n        navigate(\"/profile\");\n        console.log(\"updated user\", updatedUser)\n      } catch (e) {\n        console.log(\"catching error\")\n        setFormErrors(e);\n        return;\n      }\n\n      setFormData(data => ({...data, password: \"\"}));\n      setFormErrors([]);\n      setSaveConfirmed(true);\n      setCurrentUser(updatedUser)\n    }\n\n    function handleChange(e){\n      const {name, value} = e.target;\n      setFormData(data => ({\n        ...data,\n        [name]: value,\n      }));\n      setFormErrors([]);\n    }\n\n    return (\n      <div className=\"form\">\n        <div className=\"form-card\">\n        <h3>Profile</h3>\n        {flashMessage && <div className=\"flash-message\" style={{color: \"red\"}}>{flashMessage}</div>}\n          <div className=\"form-card-body\">\n            <form>\n              <div className=\"form-group\">\n                <label>Username</label>\n                <input\n                  name=\"username\"\n                  value={currentUser.username}\n                  readOnly\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>First Name</label>\n                <input\n                  name=\"firstName\"\n                  className=\"form-control\"\n                  value={formData.firstName}\n                  onChange={handleChange}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Last Name</label>\n                <input\n                  name=\"lastName\"\n                  className=\"form-control\"\n                  value={formData.lastName}\n                  onChange={handleChange}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Email</label>\n                <input\n                  name=\"email\"\n                  className=\"form-control\"\n                  value={formData.email}\n                  onChange={handleChange}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Confirm password to save changes: </label>\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  className=\"form-control\"\n                  value={formData.password}\n                  onChange={handleChange}\n                />\n              </div>\n\n              {/* {formErrors.length\n                  ? <Alert type=\"danger\" messages={formErrors} />\n                  : null}\n\n              {saveConfirmed\n                  ?\n                  <Alert type=\"success\" messages={[\"Updated successfully.\"]} />\n                  : null} */}\n              <div className=\"form-group button-group\">\n                <button\n                  className=\"btn btn-primary btn-block mt-4\"\n                  onClick={handleSubmit}\n                >\n                  Save Changes\n                </button>\n              </div>\n\n            </form>\n          </div>\n        </div>\n      </div>\n    )\n}\n\nexport default ProfileForm;"],"mappings":"uyBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CACnD,OAAQC,WAAW,KAAO,kBAAkB,CAC5C,MAAO,CAAAC,UAAU,KAAM,YAAY,CACnC,MAAO,CAAAC,WAAW,KAAM,qBAAqB,CAC7C,MAAO,YAAY,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnB,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,GAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,IAAAS,WAAA,CAAwCV,UAAU,CAACG,WAAW,CAAC,CAAvDQ,WAAW,CAAAD,WAAA,CAAXC,WAAW,CAAEC,cAAc,CAAAF,WAAA,CAAdE,cAAc,CACnC,IAAAC,SAAA,CAAgCd,QAAQ,CAAC,CACvCe,SAAS,CAAEH,WAAW,CAACG,SAAS,CAChCC,QAAQ,CAAEJ,WAAW,CAACI,QAAQ,CAC9BC,KAAK,CAAEL,WAAW,CAACK,KAAK,CACxBC,QAAQ,CAAEN,WAAW,CAACM,QAAQ,CAC9BC,QAAQ,CAAE,EACZ,CAAC,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAP,SAAA,IANKQ,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAO5B,IAAAI,UAAA,CAAoCxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAChC,IAAAG,UAAA,CAAwC5B,QAAQ,CAAC,EAAE,CAAC,CAAA6B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA7CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IAEpC,IAAAG,UAAA,CAA0ChC,QAAQ,CAAC,KAAK,CAAC,CAAAiC,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAlDE,aAAa,CAAAD,UAAA,IAAEE,gBAAgB,CAAAF,UAAA,IAEtCG,OAAO,CAACC,KAAK,CACX,aAAa,CACb,cAAc,CAAEzB,WAAW,CAC3B,WAAW,CAAEU,QAAQ,CACrB,aAAa,CAAEI,UAAU,CACzB,gBAAgB,CAAEQ,aACtB,CAAC,CAAC,QAEiB,CAAAI,YAAYA,CAAAC,EAAA,SAAAC,aAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,cAAA,EAAAA,aAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAA3B,SAAAC,QAA4BC,CAAC,MAAAC,WAAA,CAAA9B,QAAA,CAAA+B,WAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC3BP,CAAC,CAACQ,cAAc,CAAC,CAAC,CAEdP,WAAW,CAAG,CAChBjC,SAAS,CAAEO,QAAQ,CAACP,SAAS,CAC7BC,QAAQ,CAAEM,QAAQ,CAACN,QAAQ,CAC3BC,KAAK,CAAEK,QAAQ,CAACL,KAAK,CACrBE,QAAQ,CAAEG,QAAQ,CAACH,QACrB,CAAC,CAEGD,QAAQ,CAAGI,QAAQ,CAACJ,QAAQ,CAAAkC,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGV,CAAAnD,UAAU,CAACqD,MAAM,CAACtC,QAAQ,CAAE8B,WAAW,CAAC,QAA5DC,WAAW,CAAAG,QAAA,CAAAK,IAAA,CACX1B,eAAe,CAAC,8BAA8B,CAAC,CAC/CrB,QAAQ,CAAC,UAAU,CAAC,CACpB0B,OAAO,CAACsB,GAAG,CAAC,cAAc,CAAET,WAAW,CAAC,CAAAG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAExChB,OAAO,CAACsB,GAAG,CAAC,gBAAgB,CAAC,CAC7B/B,aAAa,CAAAyB,QAAA,CAAAO,EAAE,CAAC,CAAC,OAAAP,QAAA,CAAAQ,MAAA,mBAInBrC,WAAW,CAAC,SAAAsC,IAAI,SAAAC,aAAA,CAAAA,aAAA,IAASD,IAAI,MAAE1C,QAAQ,CAAE,EAAE,IAAE,CAAC,CAC9CQ,aAAa,CAAC,EAAE,CAAC,CACjBQ,gBAAgB,CAAC,IAAI,CAAC,CACtBtB,cAAc,CAACoC,WAAW,CAAC,0BAAAG,QAAA,CAAAW,IAAA,MAAAjB,OAAA,iBAC5B,UAAAN,aAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,QAAS,CAAAsB,YAAYA,CAACjB,CAAC,CAAC,CACtB,IAAAkB,SAAA,CAAsBlB,CAAC,CAACmB,MAAM,CAAvBC,IAAI,CAAAF,SAAA,CAAJE,IAAI,CAAEC,KAAK,CAAAH,SAAA,CAALG,KAAK,CAClB7C,WAAW,CAAC,SAAAsC,IAAI,SAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,KAAAQ,eAAA,IACNF,IAAI,CAAGC,KAAK,IACb,CAAC,CACHzC,aAAa,CAAC,EAAE,CAAC,CACnB,CAEA,mBACErB,IAAA,QAAKgE,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnB/D,KAAA,QAAK8D,SAAS,CAAC,WAAW,CAAAC,QAAA,eAC1BjE,IAAA,OAAAiE,QAAA,CAAI,SAAO,CAAI,CAAC,CACfzC,YAAY,eAAIxB,IAAA,QAAKgE,SAAS,CAAC,eAAe,CAACE,KAAK,CAAE,CAACC,KAAK,CAAE,KAAK,CAAE,CAAAF,QAAA,CAAEzC,YAAY,CAAM,CAAC,cACzFxB,IAAA,QAAKgE,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7B/D,KAAA,SAAA+D,QAAA,eACE/D,KAAA,QAAK8D,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjE,IAAA,UAAAiE,QAAA,CAAO,UAAQ,CAAO,CAAC,cACvBjE,IAAA,UACE6D,IAAI,CAAC,UAAU,CACfC,KAAK,CAAExD,WAAW,CAACM,QAAS,CAC5BwD,QAAQ,MACT,CAAC,EACC,CAAC,cAENlE,KAAA,QAAK8D,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjE,IAAA,UAAAiE,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBjE,IAAA,UACE6D,IAAI,CAAC,WAAW,CAChBG,SAAS,CAAC,cAAc,CACxBF,KAAK,CAAE9C,QAAQ,CAACP,SAAU,CAC1B4D,QAAQ,CAAEX,YAAa,CACxB,CAAC,EACC,CAAC,cAENxD,KAAA,QAAK8D,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjE,IAAA,UAAAiE,QAAA,CAAO,WAAS,CAAO,CAAC,cACxBjE,IAAA,UACE6D,IAAI,CAAC,UAAU,CACfG,SAAS,CAAC,cAAc,CACxBF,KAAK,CAAE9C,QAAQ,CAACN,QAAS,CACzB2D,QAAQ,CAAEX,YAAa,CACxB,CAAC,EACC,CAAC,cAENxD,KAAA,QAAK8D,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjE,IAAA,UAAAiE,QAAA,CAAO,OAAK,CAAO,CAAC,cACpBjE,IAAA,UACE6D,IAAI,CAAC,OAAO,CACZG,SAAS,CAAC,cAAc,CACxBF,KAAK,CAAE9C,QAAQ,CAACL,KAAM,CACtB0D,QAAQ,CAAEX,YAAa,CACxB,CAAC,EACC,CAAC,cAENxD,KAAA,QAAK8D,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjE,IAAA,UAAAiE,QAAA,CAAO,oCAAkC,CAAO,CAAC,cACjDjE,IAAA,UACEsE,IAAI,CAAC,UAAU,CACfT,IAAI,CAAC,UAAU,CACfG,SAAS,CAAC,cAAc,CACxBF,KAAK,CAAE9C,QAAQ,CAACH,QAAS,CACzBwD,QAAQ,CAAEX,YAAa,CACxB,CAAC,EACC,CAAC,cAUN1D,IAAA,QAAKgE,SAAS,CAAC,yBAAyB,CAAAC,QAAA,cACtCjE,IAAA,WACEgE,SAAS,CAAC,gCAAgC,CAC1CO,OAAO,CAAEvC,YAAa,CAAAiC,QAAA,CACvB,cAED,CAAQ,CAAC,CACN,CAAC,EAEF,CAAC,CACJ,CAAC,EACH,CAAC,CACH,CAAC,CAEZ,CAEA,cAAe,CAAA9D,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}